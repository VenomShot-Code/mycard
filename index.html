<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GitHub Mobile Game</title>
    <style>
        body { margin: 0; overflow: hidden; background: #1a1a1a; font-family: 'Segoe UI', sans-serif; }
        canvas { display: block; }
        #ui { position: absolute; top: 15px; left: 15px; color: white; font-size: 20px; pointer-events: none; }
        #fireBtn { 
            position: absolute; bottom: 40px; right: 40px; 
            width: 80px; height: 80px; background: rgba(255, 0, 0, 0.6); 
            border-radius: 50%; border: 2px solid white; color: white;
            font-weight: bold; display: flex; align-items: center; justify-content: center;
            user-select: none; -webkit-tap-highlight-color: transparent;
        }
    </style>
</head>
<body>

    <div id="ui">Score: <span id="score">0</span> | Health: <span id="health">100</span></div>
    <div id="fireBtn">FIRE</div>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const scoreDisp = document.getElementById("score");
        const healthDisp = document.getElementById("health");

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let player = { x: canvas.width/2, y: canvas.height/2, size: 18, color: "#00ff88", speed: 4, health: 100, score: 0 };
        let enemy = { x: 50, y: 50, size: 18, color: "#ff4444", speed: 2.2 };
        let bullets = [];
        let joystick = { active: false, x: 0, y: 0, currX: 0, currY: 0, radius: 50 };
        let moveX = 0, moveY = 0;

        // Joystick Controls
        canvas.addEventListener("touchstart", (e) => {
            if(e.touches[0].clientX < canvas.width / 2) {
                joystick.active = true;
                joystick.x = e.touches[0].clientX;
                joystick.y = e.touches[0].clientY;
            }
        });

        canvas.addEventListener("touchmove", (e) => {
            if (joystick.active) {
                let touch = Array.from(e.touches).find(t => t.clientX < canvas.width / 2);
                if(touch) {
                    joystick.currX = touch.clientX;
                    joystick.currY = touch.clientY;
                    let dx = joystick.currX - joystick.x;
                    let dy = joystick.currY - joystick.y;
                    let angle = Math.atan2(dy, dx);
                    moveX = Math.cos(angle);
                    moveY = Math.sin(angle);
                }
            }
        });

        canvas.addEventListener("touchend", () => { joystick.active = false; moveX = 0; moveY = 0; });

        // Firing Logic
        document.getElementById("fireBtn").addEventListener("touchstart", (e) => {
            e.preventDefault();
            // Goli dushman ki taraf chalegi
            let angle = Math.atan2(enemy.y - player.y, enemy.x - player.x);
            bullets.push({ x: player.x, y: player.y, vx: Math.cos(angle) * 8, vy: Math.sin(angle) * 8 });
        });

        function update() {
            if (player.health <= 0) return;

            // Player movement
            player.x += moveX * player.speed;
            player.y += moveY * player.speed;

            // Enemy AI
            let edx = player.x - enemy.x;
            let edy = player.y - enemy.y;
            let eAngle = Math.atan2(edy, edx);
            enemy.x += Math.cos(eAngle) * enemy.speed;
            enemy.y += Math.sin(eAngle) * enemy.speed;

            // Bullet Movement & Collision
            bullets.forEach((b, bi) => {
                b.x += b.vx; b.y += b.vy;
                let bdx = b.x - enemy.x;
                let bdy = b.y - enemy.y;
                if(Math.sqrt(bdx*bdx + bdy*bdy) < enemy.size) {
                    bullets.splice(bi, 1);
                    enemy.x = Math.random() * canvas.width;
                    enemy.y = Math.random() * canvas.height;
                    player.score += 10;
                    scoreDisp.innerText = player.score;
                    enemy.speed += 0.1; // Dushman tez hota jayega
                }
            });

            // Player Damage
            if (Math.sqrt(edx*edx + edy*edy) < player.size + enemy.size) {
                player.health -= 0.5;
                healthDisp.innerText = Math.floor(player.health);
            }

            draw();
            requestAnimationFrame(update);
        }

        function draw() {
            ctx.fillStyle = "#1a1a1a";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw Player
            ctx.fillStyle = player.color;
            ctx.beginPath(); ctx.arc(player.x, player.y, player.size, 0, Math.PI*2); ctx.fill();

            // Draw Enemy
            ctx.fillStyle = enemy.color;
            ctx.beginPath(); ctx.arc(enemy.x, enemy.y, enemy.size, 0, Math.PI*2); ctx.fill();

            // Draw Bullets
            ctx.fillStyle = "yellow";
            bullets.forEach(b => {
                ctx.beginPath(); ctx.arc(b.x, b.y, 4, 0, Math.PI*2); ctx.fill();
            });

            // Draw Joystick UI
            if (joystick.active) {
                ctx.strokeStyle = "white"; ctx.beginPath();
                ctx.arc(joystick.x, joystick.y, joystick.radius, 0, Math.PI*2); ctx.stroke();
            }

            if(player.health <= 0) {
                ctx.fillStyle = "white"; ctx.font = "30px Arial";
                ctx.fillText("GAME OVER! Score: " + player.score, canvas.width/2 - 120, canvas.height/2);
            }
        }
        update();
    </script>
</body>
</html>
